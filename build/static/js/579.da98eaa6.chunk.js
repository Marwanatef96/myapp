"use strict";(self.webpackChunkmain_project=self.webpackChunkmain_project||[]).push([[579],{2363:(e,t,a)=>{a.d(t,{A:()=>d});var r=a(3089),n=a(1244),o=a(3849),i=a(6128),s=a(3969),l=a(579);function d(e){let{dataLength:t=12}=e;const a=t%3,d=0===a?3:3-a;return(0,l.jsx)(l.Fragment,{children:Array.from({length:d}).map((e,t)=>(0,l.jsx)(r.A,{size:{xs:12,sm:6,md:4},children:(0,l.jsxs)(n.A,{sx:{width:"100%",height:"262px",display:"flex",borderRadius:3,boxShadow:3,overflow:"hidden"},children:[(0,l.jsx)(o.A,{variant:"rectangular",sx:{width:{xs:"100%",sm:180,md:200},height:{xs:200,sm:"auto",md:250},flexShrink:0}}),(0,l.jsxs)(i.A,{sx:{flex:1},children:[(0,l.jsx)(o.A,{variant:"text",width:"60%",height:30}),(0,l.jsx)(o.A,{variant:"text",width:"40%"}),(0,l.jsxs)(s.A,{mt:2,children:[(0,l.jsx)(o.A,{variant:"rectangular",height:36,sx:{mb:1}}),(0,l.jsx)(o.A,{variant:"rectangular",height:36,sx:{mb:1}}),(0,l.jsx)(o.A,{variant:"rectangular",height:36})]})]})]})},t))})}},9579:(e,t,a)=>{a.r(t),a.d(t,{default:()=>re});var r=a(9379),n=a(5043),o=a(9981),i=a(4858),s=a(3536),l=a(3969),d=a(5895),c=a(405),x=a(4020),p=a(6529),u=a(2579),h=a(9e3),m=a(3089),g=a(256),A=a(9067),b=a(8688),v=a(267),j=a(7496),f=a(7421),y=a(8835),w=a(6013),S=a(7601),C=a(847),k=a(8916),R=a(64),z=a(5272),I=a(5601),X=a(45),O=a(8128),W=a(6923),M=a(3759),E=a(9181),L=a(6154),N=a(9826),P=a(579);const F=["anchorEl"],B=(0,O.Ay)(W.A)(e=>{let{theme:t}=e;return{"& .MuiOutlinedInput-root":{padding:"6px !important",paddingRight:"36px !important",borderRadius:12,backgroundColor:t.palette.background.paper,border:"1px solid ".concat((0,N.X4)(t.palette.primary.main,.15)),transition:"border-color 0.3s ease, box-shadow 0.3s ease","&:hover":{borderColor:(0,N.X4)(t.palette.primary.main,.4),boxShadow:"0 2px 6px ".concat((0,N.X4)(t.palette.primary.main,.1))},"&.Mui-focused":{borderColor:t.palette.primary.main,boxShadow:"0 0 0 2px ".concat((0,N.X4)(t.palette.primary.main,.2))}}}}),T=(0,O.Ay)(M.A)(e=>{let{theme:t}=e;return{margin:t.spacing(.5),borderRadius:10,fontWeight:600,backgroundColor:(0,N.X4)(t.palette.primary.main,.05),border:"1px solid ".concat((0,N.X4)(t.palette.primary.main,.2)),transition:"transform 0.2s ease, box-shadow 0.2s ease","&:hover":{transform:"scale(1.04)",boxShadow:"0 2px 8px ".concat((0,N.X4)(t.palette.primary.main,.2)),backgroundColor:(0,N.X4)(t.palette.primary.main,.1)},"& .MuiChip-deleteIcon":{color:(0,N.X4)(t.palette.primary.main,.5),transition:"color 0.2s ease, transform 0.2s ease","&:hover":{color:t.palette.error.main,transform:"rotate(90deg)"}}}}),H=n.forwardRef(function(e,t){const{anchorEl:a}=e,n=(0,X.A)(e,F);return(0,P.jsx)(E.A,(0,r.A)((0,r.A)({},n),{},{ref:t,anchorEl:a,style:{width:a?a.clientWidth:void 0},placement:"bottom-start"}))}),U=(0,O.Ay)("ul")(e=>{let{theme:t}=e;return{display:"flex",flexWrap:"wrap",gap:t.spacing(1),padding:t.spacing(1),margin:0,listStyle:"none",maxHeight:300,overflowY:"auto","& li":{width:"auto",margin:0,padding:0}}});function _(e){let{name:t,control:a,options:o,label:s="Tags",placeholder:l="Search tags...",watch:d,debouncedSearch:c,tags:x=[]}=e;const p=(0,n.useRef)(null);return(0,P.jsx)(i.xI,{name:t,control:a,render:e=>{let{field:t}=e;return(0,P.jsx)(B,{multiple:!0,disableCloseOnSelect:!0,options:o,getOptionLabel:e=>{var t,a;return(null===(t=e.attributes)||void 0===t||null===(a=t.name)||void 0===a?void 0:a.en)||""},value:x.filter(e=>{var a;return null===(a=t.value)||void 0===a?void 0:a.includes(e.id)})||[],onChange:(e,a)=>{const n=a.map(e=>e.id);t.onChange(n),null===c||void 0===c||c((0,r.A)((0,r.A)({},d()),{},{tags:n}))},slots:{popper:H,listbox:U},renderOption:(e,t,a)=>{var n,o;let{selected:i}=a;return(0,P.jsx)("li",(0,r.A)((0,r.A)({},e),{},{children:(0,P.jsx)(T,{label:null===(n=t.attributes)||void 0===n||null===(o=n.name)||void 0===o?void 0:o.en,variant:i?"filled":"outlined",color:i?"primary":"default",sx:{borderRadius:"20px",fontSize:"0.8rem",backgroundColor:"#abb0b6c7 !important",color:"#000000ff !important"}})}))},renderInput:e=>(0,P.jsx)(L.A,(0,r.A)((0,r.A)({},e),{},{label:s,placeholder:l,inputRef:p})),renderTags:(e,t)=>e.map((e,a)=>{var n,o;return(0,P.jsx)(T,(0,r.A)((0,r.A)({label:null===(n=e.attributes)||void 0===n||null===(o=n.name)||void 0===o?void 0:o.en},t({index:a})),{},{sx:{borderRadius:"20px",fontSize:"0.8rem"}}))})})}})}var D=a(9806),V=a(4799),Y=a(4997),q=a(2666),K=a(2363),G=a(1244),J=a(8578),Q=a(6128);const Z=n.memo(e=>{var t,a;let{manga:r,theme:n}=e;return(0,P.jsx)(m.A,{size:{xs:12,sm:6,md:4},children:(0,P.jsxs)(G.A,{component:o.N_,to:"/info/".concat(r.id),sx:{textDecoration:"none",position:"relative",width:"100%",display:"flex",borderRadius:3,boxShadow:3,overflow:"hidden",backgroundColor:n.palette.background.paper,color:n.palette.text.primary,transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",zIndex:1,cursor:"pointer","@media (hover: hover) and (pointer: fine)":{"&::before":{content:'""',position:"absolute",top:0,left:"-75%",width:"50%",height:"100%",background:"dark"===n.palette.mode?"linear-gradient(120deg, transparent, rgba(255,255,255,0.3), transparent)":"linear-gradient(120deg, transparent, rgba(0,0,0,0.2), transparent)",transform:"skewX(-25deg)",transition:"left 0.8s ease",zIndex:5},"@media (hover: hover) and (pointer: fine)":{"&:hover":{transform:"translateY(-8px) scale(1.02)",boxShadow:"0 12px 30px ".concat(n.palette.primary.main,"30"),zIndex:10},"&:hover::before":{left:"125%"}}}},children:[(0,P.jsx)(J.A,{component:"img",image:"".concat(r.coverUrl,".256.jpg"),alt:r.titleEN,loading:"lazy",sx:{borderRadius:3,width:{xs:"40%",sm:180,md:200},height:{xs:"auto",sm:"auto",md:250},objectFit:"cover"}}),(0,P.jsxs)(Q.A,{sx:{p:2,overflow:"hidden",flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,P.jsxs)(l.A,{children:[(0,P.jsx)(d.A,{variant:"h6",noWrap:!0,sx:{fontWeight:600},children:r.titleEN}),(0,P.jsx)(d.A,{variant:"body2",sx:{color:"text.secondary",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",mb:2},children:r.description||"No description available"})]}),(0,P.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,P.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",gap:.5},children:[(0,P.jsx)(S.A,{sx:{color:"warning.main",fontSize:18}}),(0,P.jsx)(d.A,{variant:"body2",fontWeight:600,children:null!==(t=null===(a=r.rating)||void 0===a?void 0:a.toFixed(1))&&void 0!==t?t:"N/A"})]}),(0,P.jsx)(M.A,{label:r.status,size:"small",color:"Ongoing"===r.status?"info":"Completed"===r.status?"success":"default",sx:{borderRadius:2}})]})]})]})})});function $(e){let{searchParams:t}=e;const a=(0,v.A)(),r=Object.fromEntries(t.entries()),o=(0,n.useMemo)(()=>({mode:"tag",tagIds:r.tags?r.tags.split(","):[],order:r.sort||"Latest",limit:20,status:r.status||"",query:!0}),[r]),{data:i,fetchNextPage:s,hasNextPage:l,isLoading:c,isError:x,error:p}=(0,q.K8)(o),u=(0,n.useMemo)(()=>{var e;return(null===i||void 0===i||null===(e=i.pages)||void 0===e?void 0:e.flat())||[]},[i]);return c?(0,P.jsx)(D.A,{maxWidth:"lg",sx:{padding:2},children:(0,P.jsx)(m.A,{container:!0,spacing:2,children:(0,P.jsx)(K.A,{})})}):x?(0,P.jsx)(D.A,{maxWidth:"lg",sx:{padding:2},children:(0,P.jsxs)(V.A,{sx:{p:4,textAlign:"center",borderRadius:3},children:[(0,P.jsx)(d.A,{color:"error",variant:"h6",children:"Error loading manga"}),(0,P.jsx)(d.A,{color:"text.secondary",sx:{mt:1},children:(null===p||void 0===p?void 0:p.message)||"Something went wrong"})]})}):0===u.length?(0,P.jsx)(D.A,{maxWidth:"lg",sx:{padding:2},children:(0,P.jsxs)(V.A,{sx:{p:4,textAlign:"center",borderRadius:3},children:[(0,P.jsx)(d.A,{variant:"h6",color:"text.secondary",children:"No manga found"}),(0,P.jsx)(d.A,{variant:"body2",sx:{mt:1},children:"Try adjusting your search filters"})]})}):(0,P.jsx)(D.A,{maxWidth:"lg",sx:{padding:2},children:(0,P.jsx)(Y.A,{dataLength:u.length,next:s,hasMore:!!l,loader:(0,P.jsx)(m.A,{container:!0,spacing:2,sx:{mt:2},children:(0,P.jsx)(K.A,{dataLength:3})}),style:{overflow:"visible"},children:(0,P.jsx)(m.A,{container:!0,spacing:2,children:u.map(e=>(0,P.jsx)(Z,{manga:e,theme:a},e.id))})})})}var ee=a(7203);(0,O.Ay)(W.A)(e=>{let{theme:t}=e;return{"& .MuiOutlinedInput-root":{padding:"6px !important",paddingRight:"36px !important",borderRadius:12,backgroundColor:t.palette.background.paper,border:"1px solid ".concat((0,N.X4)(t.palette.primary.main,.15)),transition:"border-color 0.3s ease, box-shadow 0.3s ease","&:hover":{borderColor:(0,N.X4)(t.palette.primary.main,.4),boxShadow:"0 2px 6px ".concat((0,N.X4)(t.palette.primary.main,.1))},"&.Mui-focused":{borderColor:t.palette.primary.main,boxShadow:"0 0 0 2px ".concat((0,N.X4)(t.palette.primary.main,.2))}}}}),(0,O.Ay)(E.A)(e=>{let{theme:t}=e;return{"& .MuiPaper-root":{marginTop:8,borderRadius:12,boxShadow:"0 4px 12px ".concat((0,N.X4)(t.palette.common.black,.1)),border:"1px solid ".concat((0,N.X4)(t.palette.divider,.1)),backgroundColor:t.palette.background.paper,maxHeight:350,overflow:"hidden"}}});const te=(0,O.Ay)(V.A)(e=>{let{theme:t}=e;return{padding:t.spacing(2),borderRadius:16,backgroundColor:t.palette.background.paper,border:"1px solid ".concat((0,N.X4)(t.palette.divider,.1)),boxShadow:"0 4px 12px ".concat((0,N.X4)(t.palette.common.black,.08)),margin:"0 auto",marginBottom:t.spacing(2),position:"relative",overflow:"visible",width:"100%",maxWidth:t.breakpoints.values.lg,"&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:3,background:t.palette.primary.main,borderRadius:"16px 16px 0 0"}}}),ae=(0,O.Ay)(ee.A)(e=>{let{theme:t}=e;return{borderRadius:10,"& .MuiOutlinedInput-notchedOutline":{borderColor:(0,N.X4)(t.palette.primary.main,.2)},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:(0,N.X4)(t.palette.primary.main,.4)},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:t.palette.primary.main,borderWidth:2}}}),re=()=>{var e;(0,v.A)();const[t,a]=(0,o.ok)(),[X,O]=(0,n.useState)([]),[W,M]=(0,n.useState)(!1),[E,L]=(0,n.useState)(!0),{control:N,handleSubmit:F,watch:B,setValue:T,reset:H}=(0,i.mN)({defaultValues:{tags:[],status:"",sort:"Latest"}}),U=[{value:"Ongoing",icon:(0,P.jsx)(j.A,{fontSize:"small"}),color:"info"},{value:"Completed",icon:(0,P.jsx)(f.A,{fontSize:"small"}),color:"success"},{value:"Hiatus",icon:(0,P.jsx)(y.A,{fontSize:"small"}),color:"warning"}],D=[{value:"Latest",icon:(0,P.jsx)(w.A,{fontSize:"small"})},{value:"Oldest",icon:(0,P.jsx)(j.A,{fontSize:"small"})},{value:"Rating",icon:(0,P.jsx)(S.A,{fontSize:"small"})}];(0,n.useEffect)(()=>{V()},[]),(0,n.useEffect)(()=>{const e=Object.fromEntries(t.entries());e.tags&&T("tags",e.tags.split(",")),e.status&&T("status",e.status),e.sort&&T("sort",e.sort)},[t,T]);const V=async()=>{M(!0);try{const e=await I.A.get("manga/tag");O(e.data.data||[])}catch(e){console.error("Failed to fetch tags:",e)}finally{M(!1)}},Y=(0,n.useCallback)(e=>{var t;const r=new URLSearchParams;null!==(t=e.tags)&&void 0!==t&&t.length&&r.set("tags",e.tags.join(",")),e.status&&r.set("status",e.status),e.sort&&r.set("sort",e.sort),a(r)},[a]),q=(0,n.useMemo)(()=>(0,s.debounce)(Y,500),[Y]),K=(null===(e=B("tags"))||void 0===e?void 0:e.length)||0;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(te,{elevation:0,children:[(0,P.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,P.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,P.jsx)(C.A,{color:"primary"}),(0,P.jsx)(d.A,{variant:"h5",fontWeight:700,children:"Advanced Search"}),K>0&&(0,P.jsx)(c.A,{in:!0,children:(0,P.jsx)(x.A,{badgeContent:K,color:"primary",children:(0,P.jsx)(l.A,{})})})]}),(0,P.jsxs)(l.A,{sx:{display:"flex",gap:1},children:[(0,P.jsx)(p.A,{title:"Clear all filters",children:(0,P.jsx)(u.A,{onClick:()=>{H(),a(new URLSearchParams)},size:"small",children:(0,P.jsx)(k.A,{})})}),(0,P.jsx)(p.A,{title:E?"Collapse":"Expand",children:(0,P.jsx)(u.A,{onClick:()=>L(!E),size:"small",children:E?(0,P.jsx)(R.A,{}):(0,P.jsx)(z.A,{})})})]})]}),(0,P.jsx)(h.A,{in:E,children:(0,P.jsx)("form",{onSubmit:F(Y),children:(0,P.jsxs)(m.A,{container:!0,spacing:2,children:[(0,P.jsx)(m.A,{size:{xs:12},children:(0,P.jsx)(_,{name:"tags",control:N,options:X,watch:B,debouncedSearch:q,tags:X})}),(0,P.jsx)(m.A,{size:{xs:12,sm:6},children:(0,P.jsxs)(g.A,{fullWidth:!0,children:[(0,P.jsx)(A.A,{children:"Status"}),(0,P.jsx)(i.xI,{name:"status",control:N,render:e=>{let{field:t}=e;return(0,P.jsxs)(ae,(0,r.A)((0,r.A)({},t),{},{label:"Status",onChange:e=>{t.onChange(e.target.value),q((0,r.A)((0,r.A)({},B()),{},{status:e.target.value}))},value:t.value||"",children:[(0,P.jsx)(b.A,{value:"",children:(0,P.jsx)("em",{children:"All Status"})}),U.map(e=>(0,P.jsx)(b.A,{value:e.value,children:(0,P.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.icon,e.value]})},e.value))]}))}})]})}),(0,P.jsx)(m.A,{size:{xs:12,sm:6},children:(0,P.jsxs)(g.A,{fullWidth:!0,children:[(0,P.jsx)(A.A,{children:"Sort By"}),(0,P.jsx)(i.xI,{name:"sort",control:N,render:e=>{let{field:t}=e;return(0,P.jsx)(ae,(0,r.A)((0,r.A)({},t),{},{label:"Sort By",onChange:e=>{t.onChange(e.target.value),q((0,r.A)((0,r.A)({},B()),{},{sort:e.target.value}))},value:t.value||"Latest",children:D.map(e=>(0,P.jsx)(b.A,{value:e.value,children:(0,P.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.icon,e.value]})},e.value))}))}})]})})]})})})]}),(0,P.jsx)($,{searchParams:t})]})}}}]);
//# sourceMappingURL=579.da98eaa6.chunk.js.map