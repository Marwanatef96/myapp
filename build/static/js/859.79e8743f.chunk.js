"use strict";(self.webpackChunkmain_project=self.webpackChunkmain_project||[]).push([[859],{298:(e,t,a)=>{a.d(t,{A:()=>z});var r=a(45),o=a(9379),n=a(5043),i=a(8387),s=a(3129),d=a(6061),l=a(1807),c=a(883),p=a(4943),h=a(5227),u=a(9049),g=a(6167),m=a(1834),x=a(579);const b=["component","direction","spacing","divider","children","className","useFlexGap"],v=(0,u.A)(),f=(0,c.A)("div",{name:"MuiStack",slot:"Root"});function A(e){return(0,p.A)({props:e,name:"MuiStack",defaultTheme:v})}function y(e,t){const a=n.Children.toArray(e).filter(Boolean);return a.reduce((e,r,o)=>(e.push(r),o<a.length-1&&e.push(n.cloneElement(t,{key:"separator-".concat(o)})),e),[])}const k=e=>{let{ownerState:t,theme:a}=e,r=(0,o.A)({display:"flex",flexDirection:"column"},(0,g.NI)({theme:a},(0,g.kW)({values:t.direction,breakpoints:a.breakpoints.values}),e=>({flexDirection:e})));if(t.spacing){const e=(0,m.LX)(a),o=Object.keys(a.breakpoints.values).reduce((e,a)=>(("object"===typeof t.spacing&&null!=t.spacing[a]||"object"===typeof t.direction&&null!=t.direction[a])&&(e[a]=!0),e),{}),n=(0,g.kW)({values:t.direction,base:o}),i=(0,g.kW)({values:t.spacing,base:o});"object"===typeof n&&Object.keys(n).forEach((e,t,a)=>{if(!n[e]){const r=t>0?n[a[t-1]]:"column";n[e]=r}});const d=(a,r)=>{return t.useFlexGap?{gap:(0,m._W)(e,a)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{["margin".concat((o=r?n[r]:t.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[o]))]:(0,m._W)(e,a)}};var o};r=(0,s.A)(r,(0,g.NI)({theme:a},i,d))}return r=(0,g.iZ)(a.breakpoints,r),r};var w=a(8128),C=a(8301);const j=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:t=f,useThemeProps:a=A,componentName:s="MuiStack"}=e,c=t(k),p=n.forwardRef(function(e,t){const n=a(e),p=(0,h.A)(n),{component:u="div",direction:g="column",spacing:m=0,divider:v,children:f,className:A,useFlexGap:k=!1}=p,w=(0,r.A)(p,b),C={direction:g,spacing:m,useFlexGap:k},j=(0,l.A)({root:["root"]},e=>(0,d.Ay)(s,e),{});return(0,x.jsx)(c,(0,o.A)((0,o.A)({as:u,ownerState:C,ref:t,className:(0,i.A)(j.root,A)},w),{},{children:v?y(f,v):f}))});return p}({createStyledComponent:(0,w.Ay)("div",{name:"MuiStack",slot:"Root"}),useThemeProps:e=>(0,C.b)({props:e,name:"MuiStack"})}),z=j},859:(e,t,a)=>{a.r(t),a.d(t,{default:()=>H});var r=a(5043),o=a(3969),n=a(9806),i=a(5895),s=a(298),d=a(3182),l=a(2097),c=a(256),p=a(9067),h=a(1154),u=a(8688),g=a(9981),m=a(267),x=a(579);const b=e=>{let{chapters:t,chapterData:a,mangaTitle:r,zoomMode:n,handleZoomChange:s,handlePrevChapter:b,handleNextChapter:v}=e;const f=(0,g.Zp)(),A=(0,m.A)(),y=t.findIndex(e=>e.id===(null===a||void 0===a?void 0:a.id)),k=y===t.length-1,w=0===y;return(0,x.jsxs)(o.A,{sx:{margin:"64px 0 32px 0",background:"dark"===A.palette.mode?"linear-gradient(135deg, rgba(18,21,27,0.9), rgba(31,41,55,0.8), rgba(55,65,81,0.9))":"linear-gradient(135deg, rgba(255,255,255,0.9), rgba(245,247,251,0.8), rgba(229,231,235,0.9))",backdropFilter:"blur(12px)",boxShadow:"dark"===A.palette.mode?"0 10px 30px rgba(0,0,0,0.6)":"0 10px 30px rgba(0,0,0,0.2)",borderRadius:"16px",display:"flex",flexDirection:"column",overflow:"hidden",border:"dark"===A.palette.mode?"1px solid rgba(255,255,255,0.08)":"1px solid rgba(0,0,0,0.08)"},children:[(0,x.jsxs)(i.A,{variant:"h4",align:"center",onClick:()=>{var e;return f("/info/".concat(null===a||void 0===a||null===(e=a.relationships)||void 0===e?void 0:e.find(e=>"manga"===e.type).id))},sx:{cursor:"pointer",color:A.palette.text.primary,pt:2,pb:1,fontWeight:"700",textShadow:"dark"===A.palette.mode?"0 2px 6px rgba(0,0,0,0.6)":"0 2px 6px rgba(0,0,0,0.3)",transition:"all 0.25s ease"},children:[r," -"," ",null!==a&&void 0!==a&&a.attributes.chapter?"Chapter ".concat(a.attributes.chapter):"Oneshot"]}),(0,x.jsxs)(d.A,{sx:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:1,px:2,pb:2},children:[(0,x.jsx)(l.A,{variant:"contained",onClick:b,disabled:k,sx:{background:"linear-gradient(135deg, ".concat(A.palette.primary.main,", ").concat(A.palette.secondary.main,")"),color:A.palette.getContrastText(A.palette.primary.main),fontWeight:"600",borderRadius:"12px","&:hover":{background:"linear-gradient(135deg, ".concat(A.palette.primary.dark,", ").concat(A.palette.secondary.dark,")")}},children:"Prev Chapter"}),(0,x.jsxs)(c.A,{sx:{minWidth:200},size:"small",children:[(0,x.jsx)(p.A,{sx:{fontWeight:"600",color:A.palette.text.primary},children:"Chapter"}),(0,x.jsx)(h.A,{value:null===a||void 0===a?void 0:a.id,label:"Chapter",onChange:e=>f("/read/".concat(a.relationships.find(e=>"manga"===e.type).id,"/").concat(e.target.value)),sx:{bgcolor:"dark"===A.palette.mode?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.08)",color:A.palette.text.primary,fontWeight:"500",borderRadius:"12px",backdropFilter:"blur(6px)"},children:t.length>0?t.map(e=>(0,x.jsx)(u.A,{value:e.id,children:e.attributes.chapter?"Chapter ".concat(e.attributes.chapter):"Oneshot"},e.id)):(0,x.jsx)(u.A,{disabled:!0,children:"No Chapters"})})]}),(0,x.jsxs)(c.A,{sx:{minWidth:160},size:"small",children:[(0,x.jsx)(p.A,{sx:{fontWeight:"600",color:A.palette.text.primary},children:"Zoom"}),(0,x.jsxs)(h.A,{value:n,label:"Zoom",onChange:s,children:[(0,x.jsx)(u.A,{value:"large",children:"Large"}),(0,x.jsx)(u.A,{value:"fit-width",children:"Fit Width"}),(0,x.jsx)(u.A,{value:"medium",children:"Medium"}),(0,x.jsx)(u.A,{value:"small",children:"Small"})]})]}),(0,x.jsx)(l.A,{variant:"contained",onClick:v,disabled:w,sx:{background:"linear-gradient(135deg, ".concat(A.palette.primary.main,", ").concat(A.palette.secondary.main,")"),color:A.palette.getContrastText(A.palette.primary.main),fontWeight:"600",borderRadius:"12px","&:hover":{background:"linear-gradient(135deg, ".concat(A.palette.primary.dark,", ").concat(A.palette.secondary.dark,")")}},children:"Next Chapter"})]})]})};var v=a(9379);const f=e=>{let{pages:t,zoomMode:a}=e;const[n,i]=(0,r.useState)({}),s=()=>"fit-width"===a?{width:"80%",height:"auto"}:"small"===a?{width:"50%",height:"auto"}:"medium"===a?{width:"60%",height:"auto"}:"large"===a?{width:"120%",height:"auto"}:{width:"100%",height:"auto"};return t.map((e,t)=>(0,x.jsxs)(o.A,{sx:{display:"flex",justifyContent:"center",mb:2},children:[!n[t]&&(0,x.jsx)(o.A,{sx:(0,v.A)((0,v.A)({},s()),{},{height:"600px",borderRadius:"12px",background:"linear-gradient(90deg, #2a2a40 25%, #3a3a55 50%, #2a2a40 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite","@keyframes shimmer":{"0%":{backgroundPosition:"-200% 0"},"100%":{backgroundPosition:"200% 0"}}})}),(0,x.jsx)("img",{src:e,alt:"Page ".concat(t+1),style:(0,v.A)((0,v.A)({},s()),{},{borderRadius:"12px",boxShadow:"0 10px 25px rgba(0,0,0,0.5)",transition:"opacity 0.5s ease-in-out",opacity:n[t]?1:0,position:n[t]?"relative":"absolute"}),onLoad:()=>i(e=>(0,v.A)((0,v.A)({},e),{},{[t]:!0}))})]},t))};var A=a(9417),y=a(4339),k=a(45),w=a(8387),C=a(1807),j=a(9699),z=a(7194),S=a(9857),I=a(6061);function R(e){return(0,I.Ay)("MuiFab",e)}const N=(0,S.A)("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]);var M=a(2466),W=a(8128),L=a(1612),F=a(4412),E=a(8301);const T=["children","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"],P=(0,W.Ay)(j.A,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>(0,M.A)(e)||"classes"===e,overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant],t["size".concat((0,z.A)(a.size))],"inherit"===a.color&&t.colorInherit,t[(0,z.A)(a.size)],t[a.color]]}})((0,L.A)(e=>{var t,a;let{theme:r}=e;return(0,v.A)((0,v.A)({},r.typography.button),{},{minHeight:36,transition:r.transitions.create(["background-color","box-shadow","border-color"],{duration:r.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(r.vars||r).zIndex.fab,boxShadow:(r.vars||r).shadows[6],"&:active":{boxShadow:(r.vars||r).shadows[12]},color:r.vars?r.vars.palette.grey[900]:null===(t=(a=r.palette).getContrastText)||void 0===t?void 0:t.call(a,r.palette.grey[300]),backgroundColor:(r.vars||r).palette.grey[300],"&:hover":{backgroundColor:(r.vars||r).palette.grey.A100,"@media (hover: none)":{backgroundColor:(r.vars||r).palette.grey[300]},textDecoration:"none"},["&.".concat(N.focusVisible)]:{boxShadow:(r.vars||r).shadows[6]},variants:[{props:{size:"small"},style:{width:40,height:40}},{props:{size:"medium"},style:{width:48,height:48}},{props:{variant:"extended"},style:{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48}},{props:{variant:"extended",size:"small"},style:{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34}},{props:{variant:"extended",size:"medium"},style:{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40}},{props:{color:"inherit"},style:{color:"inherit"}}]})}),(0,L.A)(e=>{let{theme:t}=e;return{variants:[...Object.entries(t.palette).filter((0,F.A)(["dark","contrastText"])).map(e=>{let[a]=e;return{props:{color:a},style:{color:(t.vars||t).palette[a].contrastText,backgroundColor:(t.vars||t).palette[a].main,"&:hover":{backgroundColor:(t.vars||t).palette[a].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[a].main}}}}})]}}),(0,L.A)(e=>{let{theme:t}=e;return{["&.".concat(N.disabled)]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}})),Z=r.forwardRef(function(e,t){const a=(0,E.b)({props:e,name:"MuiFab"}),{children:r,className:o,color:n="default",component:i="button",disabled:s=!1,disableFocusRipple:d=!1,focusVisibleClassName:l,size:c="large",variant:p="circular"}=a,h=(0,k.A)(a,T),u=(0,v.A)((0,v.A)({},a),{},{color:n,component:i,disabled:s,disableFocusRipple:d,size:c,variant:p}),g=(e=>{const{color:t,variant:a,classes:r,size:o}=e,n={root:["root",a,"size".concat((0,z.A)(o)),"inherit"===t?"colorInherit":t]},i=(0,C.A)(n,R,r);return(0,v.A)((0,v.A)({},r),i)})(u);return(0,x.jsx)(P,(0,v.A)((0,v.A)({className:(0,w.A)(g.root,o),component:i,disabled:s,focusRipple:!d,focusVisibleClassName:(0,w.A)(g.focusVisible,l),ownerState:u,ref:t},h),{},{classes:g,children:r}))});const D=(0,a(9992).A)((0,x.jsx)("path",{d:"M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"}),"KeyboardArrowUp"),O=()=>{const e=(0,A.A)({threshold:200});return(0,x.jsx)(y.A,{direction:"up",in:e,mountOnEnter:!0,unmountOnExit:!0,children:(0,x.jsx)(Z,{color:"primary",size:"medium",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),sx:{position:"fixed",bottom:24,right:24,background:"linear-gradient(135deg,#ff6ec4,#7873f5)","&:hover":{background:"linear-gradient(135deg,#ff4db0,#5f5fff)"}},children:(0,x.jsx)(D,{})})})};var V=a(2666);const U=()=>{var e;const t=(0,g.g)(),a=(0,g.Zp)(),[o,n]=(0,r.useState)([]),[i,s]=(0,r.useState)(null),[d,l]=(0,r.useState)([]),[c,p]=(0,r.useState)("fit-width"),[h,u]=(0,r.useState)(!0),[m,x]=(0,r.useState)(""),b=(0,r.useRef)(!1),{data:v,isLoading:f}=(0,V.IR)({mode:"chapter",chapterId:t.id}),{data:A,isLoading:y}=(0,V.IR)({mode:"atHome",chapterId:t.id}),{data:k,isLoading:w}=(0,V.IR)({mode:"details",mangaId:t.mangaId}),{data:C,fetchNextPage:j,hasNextPage:z,isFetchingNextPage:S,isLoading:I}=(0,V.K8)({mode:"chapters",limit:100,mangaId:t.mangaId,query:!0,order:"desc"}),R=null!==(e=null===C||void 0===C?void 0:C.pages.flatMap(e=>e.chapters))&&void 0!==e?e:[];(0,r.useEffect)(()=>{!z||S||I||j()},[z,S,I,j,C,t.mangaId]),(0,r.useEffect)(()=>{R.length!==d.length&&l(R)},[R,d.length]),(0,r.useEffect)(()=>{!w&&k&&x(k.titleEN||"Unknown Manga")},[t.mangaId,k,w]),(0,r.useEffect)(()=>{var e;if(u(!0),n([]),s(v),!f&&!y){if(!v)return u(!1);if(null!==v&&void 0!==v&&null!==(e=v.attributes)&&void 0!==e&&e.externalUrl||!A)window.location.href=v.attributes.externalUrl;else{const e=A.baseUrl,t=A.chapter.hash,a=A.chapter.data;n(a.map(a=>"".concat(e,"/data/").concat(t,"/").concat(a)))}u(!1)}},[v,A,f,y]);const N=()=>{const e=d.findIndex(e=>e.id===t.id);e>=0&&e<d.length-1&&a("/read/".concat(t.mangaId,"/").concat(d[e+1].id))},M=()=>{const e=d.findIndex(e=>e.id===t.id);e>0&&a("/read/".concat(t.mangaId,"/").concat(d[e-1].id))},W=e=>{b.current||(b.current=!0,"ArrowLeft"===e.key&&N(),"ArrowRight"===e.key&&M())},L=e=>{"ArrowLeft"!==e.key&&"ArrowRight"!==e.key||(b.current=!1)};return(0,r.useEffect)(()=>(window.addEventListener("keydown",W),window.addEventListener("keyup",L),()=>{window.removeEventListener("keydown",W),window.removeEventListener("keyup",L)}),[d,t.id]),{pages:o,chapterData:i,chapters:d,zoomMode:c,setZoomMode:p,loading:h,mangaTitle:m,handleZoomChange:e=>p(e.target.value),handlePrevChapter:N,handleNextChapter:M,currentChapterIndex:d.findIndex(e=>e.id===t.id)}};var G=a(4859);const H=function(){const{pages:e,loading:t,mangaTitle:a,chapters:d,chapterData:l,zoomMode:c,handleZoomChange:p,handlePrevChapter:h,handleNextChapter:u,currentChapterIndex:g}=U(),{addChapter:m}=(0,G.A)(),v=window.location.pathname.split("/")[2],A=window.location.pathname.split("/")[3];return(0,r.useEffect)(()=>{m(v,A)},[v,A,m]),(0,x.jsxs)(o.A,{sx:{minHeight:"100vh",background:"linear-gradient(to bottom, #1a1a2e, #0f0f1a)",pb:5},children:[(0,x.jsx)(n.A,{maxWidth:"lg",sx:{mt:4},children:t?(0,x.jsx)(i.A,{variant:"h4",m:"64px",p:2,align:"center",color:"white",children:"Loading Chapter..."}):(0,x.jsxs)(s.A,{spacing:4,children:[(0,x.jsx)(b,{chapters:d,chapterData:l,mangaTitle:a,zoomMode:c,handleZoomChange:p,handlePrevChapter:h,handleNextChapter:u}),(0,x.jsx)(f,{pages:e,zoomMode:c})]})}),(0,x.jsx)(O,{})]})}},883:(e,t,a)=>{a.d(t,{A:()=>r});const r=(0,a(7675).Ay)()},4943:(e,t,a)=>{a.d(t,{A:()=>n});var r=a(8480),o=a(4265);function n(e){let{props:t,name:a,defaultTheme:n,themeId:i}=e,s=(0,o.A)(n);return i&&(s=s[i]||s),(0,r.A)({theme:s,name:a,props:t})}}}]);
//# sourceMappingURL=859.79e8743f.chunk.js.map